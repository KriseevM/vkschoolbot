# vkschoolbot
"Школьный" бот для ВКонтакте, который может по запросу написать в ответе расписание, изменения на следующий день или домашнее задание на завтра из специальной базы данных<br >
Чтобы заставить бота работать, нужно перенести все файлы проекта на свой сервер и отредактировать некоторые файлы:
<ul>
  <li>Файлы 1-6 в папке days - расписание по дням недели (1 - понедельник, 2 - вторник и т.д.)</li>
  <li>Файл dbconnectinfo.php - данные для подключения к базе данных MySQL с домашними заданиями (Про саму базу данных <a href="#databaseinfo">см. ниже</a>).</li>
  <li>Файл changes в папке publicinfo (изменения в расписании на завтра в текстовой форме) и NumericChanges в корневой директории проекта (тоже самое, только для бота), а также файлы с числовым расписанием для бота в папке NumericDays (<a href="#numeric">См. ниже</a>)</li>
</ul>
После всего этого необходимо получить токен своей группы во вкладке Работа с API управления сообществом и вставить его в переменную $token в файле APIInfo.php, а также подключить файлы index.php и Homework.php как серверы во вкладке Callback API (типы событий: Новое сообщение и Редактирование сообщения. Потребуется также вставить строку подтверждения в переменную $confirmation). 
<a name="numeric"></a><h1>Файл NumericChanges и файлы в папке NumericDays</h1>
Эти файлы нужны для того, чтобы бот мог правильно выводить домашние задания. Данные в них хранятся в виде набора чисел, разделенных символами переноса строки. Каждое число соответствует ID урока в базе данных. В файлах в папке NumericDays хранится расписание аналогично файлам в папке days. В файле NumericChanges каждая строка соответствует номеру урока по счету в файле из папки NumericDays. Если урок по изменениям пропадает - вместо номера пишется x (в английской раскладке), если изменения на конкретный по счету урок нет - вместо номера ставится только символ переноса строки. Т.е. например, завтра понедельник, файл NumericDays/1 содержит следующее:
<pre>
1
2
3
4
5
6
</pre>
А файл NumericChanges содержит следующее:
<pre>
x
x
5
7
</pre>
Бот в этом случае выведет домашнее задание по предметам 5, 6, 7, т.е. итоговое расписание будет представлять собой вид:
<pre>


5
7
5
6
</pre>
<a name="databaseinfo"></a><h1>База данных с домашними заданиями</h1>
База данных должна иметь название, соответствующее значению переменной $dbname в файле dbconnectinfo.php. Она должна иметь таблицу "Homeworkdata", состоящую из столбцов "ID", "Subject" и "Homework" для ID предмета, его имени и задания по нему соответственно. ID имеет числовой тип, Subject и Homework имеют текстовые типы.
