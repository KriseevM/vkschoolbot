# vkschoolbot
"Школьный" бот для ВКонтакте, который может по запросу написать в ответе расписание, изменения на следующий день или домашнее задание на завтра из специальной базы данных<br >
Чтобы бот работал, нужно перенести все файлы проекта на свой сервер и создать/отредактировать некоторые файлы:
<ul>
  <li>Файлы 1-6 в папке days - расписание по дням недели (1 - понедельник, 2 - вторник и т.д.)</li>
  <li>Файл dbconnectinfo.php - данные для подключения к базе данных MySQL с домашними заданиями (Про саму базу данных <a href="#databaseinfo">см. ниже</a>).</li>
  <li>Файл changes (изменения в расписании на завтра в текстовой форме) и NumericChanges в корневой директории проекта (тоже самое, только для бота), а также файлы с числовым расписанием для бота в папке NumericDays (<a href="#numeric">См. ниже</a>)</li>
</ul>
Далее необходимо установить VK PHP SDK командой 
<pre>composer install</pre>
После этого необходимо получить токен доступа своей группы с правами сообщений сообщества во вкладке "Работа с API" управления сообществом и вставить его в переменную $token в файле APIInfo.php, а также подключить файл index.php как сервер во вкладке Callback API (установите типы событий: Новое сообщение и Редактирование сообщения. Для подключения сервера потребуется также вставить строку подтверждения в переменную $confirmation файла APIInfo.php). 
<a name="numeric"></a><h1>Файл NumericChanges и файлы в папке NumericDays</h1>
Эти файлы нужны для того, чтобы бот мог правильно выводить домашние задания. Данные в них хранятся в виде набора чисел, разделенных символами переноса строки. Каждое число соответствует ID урока в базе данных. В файлах в папке NumericDays хранится расписание аналогично файлам в папке days (т.е. файлы 1-6 соответственно дням недели: 1 - понедельник, 6 - суббота). В файле NumericChanges должно содержаться 8 строк. Каждая строка соответствует номеру урока по счету в файле из папки NumericDays. Если урок по изменениям пропадает - вместо номера пишется -1 (в английской раскладке), если изменения на конкретный по счету урок нет - вместо номера ставится -2. Т.е. например, завтра понедельник, файл NumericDays/1 содержит следующее:
<pre>
1
2
3
4
5
6
</pre>
А файл NumericChanges содержит следующее:
<pre>
-1
-2
5
7
</pre>
Бот в этом случае выведет домашнее задание по предметам 2, 5, 6, 7, т.е. итоговое расписание будет представлять собой вид:
<pre>
2
5
7
5
6
</pre>
<a name="databaseinfo"></a><h1>База данных с домашними заданиями</h1>
База данных должна иметь название, соответствующее значению переменной $dbname в файле dbconnectinfo.php. Она должна иметь таблицу "Homeworkdata", состоящую из столбцов "ID", "Subject" и "Homework" для ID предмета, его имени и задания по нему соответственно. ID имеет числовой тип, Subject и Homework имеют любые текстовые типы.
